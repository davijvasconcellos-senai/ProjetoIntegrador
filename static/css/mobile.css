/* =============================================================
 * Arquivo: mobile.css
 * Objetivo: Regras específicas para experiência mobile (<=768px) mantendo
 *           consistência com desktop sem duplicar lógica.
 * Destaques:
 *   - Sidebar sempre expandida (sem comportamento de colapso).
 *   - Ajustes de tipografia, espaçamentos, e largura de cartões para toque.
 *   - Scroll horizontal suave em sensores (sensors-grid) com snap.
 *   - Dark-mode adaptado para legibilidade em telas menores.
 *   - Força visibilidade de textos e logo mesmo quando classes colapsadas existem.
 * Acessibilidade:
 *   - Alturas mínimas para elementos clicáveis (>=44px onde aplicável).
 *   - Regras de prefers-reduced-motion para reduzir animações.
 * ============================================================= */

/* ==================== RESET E BASE ==================== */

/* Mobile: menu lateral sempre visível (sem botão hamburger) */
.mobile-menu-btn,
.mobile-overlay {
    display: none !important;
}

/* Desktop: esconder elementos mobile não utilizados */
@media screen and (min-width: 769px) {

    .mobile-menu-btn,
    .mobile-overlay {
        display: none !important;
    }
}

/* ==================== DARK MODE MOBILE ==================== */
@media screen and (max-width: 768px) {

    /* Garantir que tema escuro funcione corretamente no mobile */
    .dark-mode {
        background: var(--dark-bg-primary, #0d1117) !important;
        color: var(--dark-text-primary, #c9d1d9) !important;
    }

    .dark-mode .main-content {
        background: var(--dark-bg-primary, #0d1117) !important;
    }

    .dark-mode .main-header {
        background: var(--dark-bg-secondary, #161b22) !important;
        border-bottom: 1px solid var(--dark-border, #30363d) !important;
    }

    .dark-mode .sidebar {
        background: var(--dark-bg-secondary, #161b22) !important;
    }

    /* Garantir que textos dos menus estejam visíveis no mobile */
    .sidebar .menu-text {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
    }

    /* Logo grande visível */
    .sidebar .logo-img-large {
        display: block !important;
    }

    .dark-mode .sensor-card {
        background: var(--dark-bg-tertiary, #21262d) !important;
        border: 1px solid var(--dark-border, #30363d) !important;
    }

    .dark-mode .failures-section,
    .dark-mode .calendar-section,
    .dark-mode .alerts-section {
        background: var(--dark-bg-tertiary, #21262d) !important;
        border: 1px solid var(--dark-border, #30363d) !important;
    }

    .dark-mode .failures-table th {
        background: var(--dark-bg-secondary, #161b22) !important;
        color: var(--dark-text-primary, #c9d1d9) !important;
    }

    .dark-mode .failures-table td {
        color: var(--dark-text-secondary, #8b949e) !important;
        border-bottom: 1px solid var(--dark-border, #30363d) !important;
    }

    .dark-mode .calendar-grid>div {
        background: var(--dark-bg-secondary, #161b22) !important;
        color: var(--dark-text-primary, #c9d1d9) !important;
    }

    .dark-mode .calendar-grid .today {
        background: var(--data-primary, #58a6ff) !important;
        color: #000 !important;
    }

    /* Theme toggle button no mobile */
    .dark-mode #themeToggleBtn {
        background: var(--dark-bg-tertiary, #21262d) !important;
    }

    .dark-mode #themeToggleBtn .theme-toggle-slider {
        background: var(--data-primary, #58a6ff) !important;
    }
}


/* ==================== MOBILE ONLY (≤768px) ==================== */
@media screen and (max-width: 768px) {

    /* === SIDEBAR MOBILE - SEMPRE VISÍVEL E EXPANDIDA === */
    .sidebar {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 280px !important;
        height: 100vh !important;
        z-index: 9999 !important;
        transition: none !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        -webkit-overflow-scrolling: touch !important;
        box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1) !important;
    }

    /* FORÇAR largura 280px independente de classes */
    .sidebar,
    .sidebar.collapsed,
    .sidebar.mobile-open,
    body .sidebar,
    html .sidebar {
        width: 280px !important;
        left: 0 !important;
        min-width: 280px !important;
        max-width: 280px !important;
    }

    .sidebar.mobile-open {
        left: 0 !important;
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3) !important;
    }

    .dark-mode .sidebar.mobile-open {
        box-shadow: 4px 0 20px rgba(0, 0, 0, 0.7) !important;
    }

    /* Sidebar sempre expandida no mobile - FORÇAR largura 280px */
    .sidebar,
    .sidebar.collapsed,
    .sidebar.mobile-open {
        width: 280px !important;
        left: 0 !important;
    }

    /* FORÇAR exibição de textos mesmo com classe .collapsed */
    .sidebar .menu-text,
    .sidebar.collapsed .menu-text {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        width: auto !important;
        max-width: none !important;
        overflow: visible !important;
    }

    /* Regras com máxima especificidade para textos */
    html body .sidebar .menu-text,
    html body .sidebar.collapsed .menu-text,
    .sidebar:not(.fake-class) .menu-text {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        position: relative !important;
        left: auto !important;
        transform: none !important;
        clip: auto !important;
        clip-path: none !important;
        height: auto !important;
        font-size: 15px !important;
    }

    .sidebar .logo-img-large,
    .sidebar.collapsed .logo-img-large {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
    }

    .sidebar .menu-section,
    .sidebar.collapsed .menu-section {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
    }

    .sidebar .sidebar-separator,
    .sidebar.collapsed .sidebar-separator {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
        margin: 12px 16px !important;
    }

    /* === MAIN CONTENT === */
    .main-content {
        margin-left: 280px !important;
        width: calc(100% - 280px) !important;
        padding: 80px 12px 20px 12px !important;
    }

    /* === HEADER === */
    .main-header {
        padding: 12px 16px !important;
        flex-wrap: wrap !important;
        gap: 12px !important;
        border-radius: 12px !important;
    }

    .page-title {
        font-size: 20px !important;
        width: 100% !important;
        order: 1 !important;
    }

    .header-actions {
        width: 100% !important;
        justify-content: space-between !important;
        order: 2 !important;
    }

    .search-bar {
        flex: 1 !important;
        max-width: 60% !important;
    }

    .search-bar input {
        font-size: 14px !important;
        padding: 8px 12px 8px 36px !important;
        height: 40px !important;
    }

    .user-menu {
        padding: 8px 12px !important;
        font-size: 14px !important;
    }

    .user-avatar {
        width: 32px !important;
        height: 32px !important;
        font-size: 14px !important;
    }

    /* === DEMO BANNER === */
    .demo-banner {
        padding: 12px 16px !important;
        flex-direction: column !important;
        text-align: center !important;
        gap: 12px !important;
    }

    .demo-text {
        font-size: 14px !important;
    }

    .demo-login-btn {
        width: 100% !important;
        padding: 10px 20px !important;
    }

    /* === DASHBOARD CONTENT === */
    .dashboard-content {
        padding: 16px 8px !important;
        gap: 16px !important;
    }

    .dashboard-row {
        flex-direction: column !important;
        gap: 16px !important;
    }

    section {
        margin-bottom: 16px !important;
        padding: 16px !important;
    }

    section h3 {
        font-size: 18px !important;
        margin-bottom: 12px !important;
    }

    /* === SENSOR CARDS === */
    .sensors-grid {
        display: flex !important;
        gap: 12px !important;
        overflow-x: auto !important;
        overflow-y: hidden !important;
        -webkit-overflow-scrolling: touch !important;
        scroll-snap-type: x mandatory !important;
        padding-bottom: 8px !important;
        scrollbar-width: thin !important;
    }

    .sensors-grid::-webkit-scrollbar {
        height: 4px !important;
    }

    .sensors-grid::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1) !important;
        border-radius: 2px !important;
    }

    .sensors-grid::-webkit-scrollbar-thumb {
        background: #667eea !important;
        border-radius: 2px !important;
    }

    .sensor-card {
        min-width: 160px !important;
        max-width: 160px !important;
        flex-shrink: 0 !important;
        padding: 14px !important;
        scroll-snap-align: start !important;
    }

    .sensor-icon {
        font-size: 28px !important;
        width: 44px !important;
        height: 44px !important;
    }

    .sensor-value {
        font-size: 22px !important;
        margin: 8px 0 4px !important;
    }

    .sensor-label {
        font-size: 12px !important;
    }

    /* === TABELAS === */
    .failures-section {
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    .failures-table-container {
        overflow-x: auto !important;
    }

    .failures-table {
        min-width: 600px !important;
        font-size: 13px !important;
    }

    .failures-table th {
        padding: 12px 10px !important;
        font-size: 11px !important;
        position: sticky !important;
        top: 0 !important;
    }

    .failures-table td {
        padding: 12px 10px !important;
    }

    .status-badge {
        padding: 4px 10px !important;
        font-size: 10px !important;
    }

    /* === CALENDÁRIO === */
    .calendar {
        padding: 16px !important;
    }

    .calendar-header h4 {
        font-size: 16px !important;
    }

    .nav-button {
        width: 32px !important;
        height: 32px !important;
        font-size: 16px !important;
    }

    .calendar-weekdays {
        font-size: 12px !important;
        padding: 8px 0 !important;
    }

    .calendar-days {
        font-size: 13px !important;
    }

    .calendar-days div {
        height: 36px !important;
        line-height: 36px !important;
        font-size: 12px !important;
    }

    /* === WARNINGS === */
    .warnings-list {
        max-height: 250px !important;
    }

    .warning-item {
        padding: 10px 12px !important;
        font-size: 13px !important;
    }

    /* === BOTÃO DESKTOP (esconder) === */
    .toggle-btn {
        display: none !important;
    }

    /* === SIDEBAR ELEMENTS === */
    .sidebar-header {
        height: 60px !important;
        padding: 12px 16px !important;
    }

    .logo-img-large {
        height: 70px !important;
        margin: 8px auto !important;
    }

    .sidebar-menu {
        padding: 8px !important;
    }

    .menu-item {
        padding: 14px 16px !important;
        font-size: 15px !important;
        min-height: 48px !important;
        display: flex !important;
        align-items: center !important;
    }

    .menu-icon {
        font-size: 20px !important;
        width: 32px !important;
        height: 32px !important;
        flex-shrink: 0 !important;
    }

    .menu-text {
        font-size: 15px !important;
    }
}

/* ==================== MOBILE PEQUENO (≤480px) ==================== */
@media screen and (max-width: 480px) {

    .mobile-menu-btn {
        width: 44px !important;
        height: 44px !important;
        top: 12px !important;
        left: 12px !important;
    }

    .main-content {
        padding: 70px 8px 16px 8px !important;
    }

    .page-title {
        font-size: 18px !important;
    }

    .search-bar {
        max-width: 55% !important;
    }

    .search-bar input {
        font-size: 13px !important;
        height: 36px !important;
    }

    .sensor-card {
        min-width: 140px !important;
        max-width: 140px !important;
        padding: 12px !important;
    }

    .sensor-value {
        font-size: 20px !important;
    }

    .failures-table {
        min-width: 550px !important;
        font-size: 12px !important;
    }

    .calendar-days div {
        height: 32px !important;
        line-height: 32px !important;
        font-size: 11px !important;
    }
}

/* ==================== LANDSCAPE MOBILE ==================== */
@media screen and (max-height: 500px) and (orientation: landscape) and (max-width: 768px) {

    .main-content {
        padding: 60px 16px 12px 16px !important;
    }

    .sidebar {
        max-height: 100vh !important;
        overflow-y: auto !important;
    }

    .logo-img-large {
        height: 50px !important;
        margin: 6px auto !important;
    }

    .menu-item {
        padding: 10px 14px !important;
        min-height: 40px !important;
    }

    .sensor-card {
        min-width: 140px !important;
        max-width: 140px !important;
    }

    /* === USER MENU MOBILE === */
    .user-menu {
        display: flex !important;
        align-items: center !important;
        gap: 8px !important;
        padding: 6px 10px !important;
        border-radius: 8px !important;
        transition: background 0.2s ease !important;
    }

    .user-menu:active {
        background: rgba(0, 0, 0, 0.05) !important;
    }

    .dark-mode .user-menu:active {
        background: rgba(255, 255, 255, 0.1) !important;
    }

    .user-avatar {
        width: 36px !important;
        height: 36px !important;
        font-size: 16px !important;
        flex-shrink: 0 !important;
    }

    .user-menu>span {
        font-size: 14px !important;
        max-width: 120px !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
        white-space: nowrap !important;
    }

    /* === TOOLTIPS MOBILE === */
    .tooltip {
        display: none !important;
        /* Esconder tooltips por padrão no mobile */
    }

    /* Mostrar tooltip ao tocar (quando ativado via JS) */
    .menu-item.show-tooltip .tooltip {
        display: block !important;
        position: fixed !important;
        left: 70px !important;
        background: rgba(0, 0, 0, 0.9) !important;
        color: white !important;
        padding: 6px 12px !important;
        border-radius: 6px !important;
        font-size: 12px !important;
        white-space: nowrap !important;
        z-index: 10002 !important;
        pointer-events: none !important;
    }

    /* === DEMO BANNER MOBILE === */
    .demo-banner {
        flex-direction: column !important;
        gap: 10px !important;
        padding: 12px 16px !important;
        font-size: 13px !important;
        text-align: center !important;
    }

    .demo-login-btn {
        width: 100% !important;
        max-width: 200px !important;
        padding: 8px 16px !important;
        font-size: 13px !important;
    }

    /* === SCROLL INDICATORS === */
    /* Indicador visual de que há mais conteúdo para scrollar */
    .has-scroll::after {
        content: '→' !important;
        position: absolute !important;
        right: 0 !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        background: linear-gradient(to right, transparent, rgba(102, 126, 234, 0.8)) !important;
        padding: 4px 12px 4px 24px !important;
        font-size: 20px !important;
        color: white !important;
        pointer-events: none !important;
        border-radius: 4px 0 0 4px !important;
        animation: pulse-scroll 2s infinite !important;
    }

    .dark-mode .has-scroll::after {
        background: linear-gradient(to right, transparent, rgba(88, 166, 255, 0.8)) !important;
    }

    @keyframes pulse-scroll {

        0%,
        100% {
            opacity: 0.6;
            transform: translateY(-50%) translateX(0);
        }

        50% {
            opacity: 1;
            transform: translateY(-50%) translateX(-5px);
        }
    }

    /* === AVISOS/ALERTS MOBILE === */
    .alerts-section,
    .important-alerts {
        padding: 16px !important;
        border-radius: 12px !important;
    }

    .alert-item {
        padding: 12px !important;
        font-size: 13px !important;
        border-radius: 8px !important;
    }

    /* === SEPARADORES === */
    .separator,
    .sidebar-separator {
        margin: 16px 0 !important;
    }
}


/* ==================== TOUCH OPTIMIZATIONS ==================== */
@media (hover: none) and (pointer: coarse) {

    /* Aumentar áreas de toque */
    button,
    a,
    .menu-item,
    .nav-button,
    .mobile-menu-btn {
        min-height: 44px !important;
        min-width: 44px !important;
    }

    /* Remover efeitos hover em dispositivos touch */
    .menu-item:hover,
    .sensor-card:hover,
    .nav-button:hover {
        transform: none !important;
    }

    /* Feedback visual ao tocar */
    .menu-item:active,
    .nav-button:active,
    button:active {
        opacity: 0.7 !important;
        transition: opacity 0.1s ease !important;
    }
}

/* ==================== PRINT STYLES ==================== */
@media print {

    .mobile-menu-btn,
    .mobile-overlay,
    .sidebar,
    .demo-banner {
        display: none !important;
    }

    .main-content {
        margin: 0 !important;
        padding: 0 !important;
    }
}